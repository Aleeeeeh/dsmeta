package com.devsuperior.dsmeta.services;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import com.twilio.Twilio;
import com.twilio.rest.api.v2010.account.Message;
import com.twilio.rest.lookups.v1.PhoneNumber;

@Service
public class SmsService {
	//Value pega das vari√°veis de ambiente definida em application.properties
	@Value("${twilio.sid}")
	private String twilioSid;

	@Value("${twilio.key}")
	private String twilioKey;

	@Value("${twilio.phone.from}")
	private String twilioPhoneFrom;

	@Value("${twilio.phone.to}")
	private String twilioPhoneTo;

	public void sendSms() {

		public static final String ACCOUNT_SID = System.getenv("TWILIO_ACCOUNT_SID");
	    public static final String AUTH_TOKEN = System.getenv("TWILIO_AUTH_TOKEN");

	    public static void main(String[] args) {
	        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);
	        Message message = Message.creator(
	                new com.twilio.type.PhoneNumber("+14159352345"),
	                new com.twilio.type.PhoneNumber("+14158141829"),
	                "Where's Wallace?")
	            .create();

	        System.out.println(message.getSid());
	}
}